
(ert-deftest linux-common-usage-test ()
  (let ((current-path "/home/user/first/second/third/"))
    (should (equal "/home/user/first/" (eshell-up-find-parent-dir "st" current-path)))
    (should (equal "/home/user/first/second/" (eshell-up-find-parent-dir "s" current-path)))
    (should (equal "/home/user/first/second/third/" (eshell-up-find-parent-dir "h" current-path)))
    (should (equal "/home/user/" (eshell-up-find-parent-dir "ser" current-path)))
    (should (equal "/home/" (eshell-up-find-parent-dir "hom" current-path)))))

(ert-deftest windowsx-common-usage-test ()
  (let ((current-path "C:\\Program Files\\WindowsApps\\first"))
    (should (equal "C:\\Program Files\\WindowsApps\\first" (eshell-up-find-parent-dir "fi" current-path)))
    (should (equal "C:\\Program Files\\WindowsApps\\" (eshell-up-find-parent-dir "sA" current-path)))
    (should (equal "C:\\Program Files\\" (eshell-up-find-parent-dir " " current-path)))
    (should (equal "C:\\" (eshell-up-find-parent-dir ":" current-path)))))

 
(ert-deftest case-test ()
  (let ((current-path "/path/paTh/pATh/PATH/")
        (system-type 'windows-nt))
    (setq eshell-up-ignore-case t)
    (should (equal "/path/paTh/pATh/PATH/" (eshell-up-find-parent-dir "pa" current-path)))
    (setq eshell-up-ignore-case nil)
    (should (equal "/path/paTh/" (eshell-up-find-parent-dir "pa" current-path)))
    (should (equal "/path/paTh/pATh/PATH/" (eshell-up-find-parent-dir "PATH" current-path)))
    (should (equal "/path/" (eshell-up-find-parent-dir "pat" current-path)))))
